{
  "mcpServers": {
    "embedding-server": {
      "command": "python",
      "args": ["src/mcp_servers/embedding_server.py"],
      "port": 5003,
      "transport": "sse",
      "description": "Handles text embeddings and category classification",
      "tools": ["get_embedding", "classify_categories"]
    },
    "interpret-server": {
      "command": "python",
      "args": ["src/mcp_servers/interpret_server.py"],
      "port": 5004,
      "transport": "sse",
      "description": "Analyzes user shopping intent, generates EQuIP prompt and token mapping",
      "tools": ["interpret_query"],
      "dependsOn": ["embedding-server"]
    },
    "equip-server": {
      "command": "python",
      "args": ["src/mcp_servers/equip_server.py"],
      "port": 5005,
      "transport": "sse",
      "description": "Generates Elasticsearch DSL using EQuIP 3B model",
      "tools": ["generate_dsl", "check_equip_status"]
    },
    "dsl-processor-server": {
      "command": "python",
      "args": ["src/mcp_servers/dsl_processor_server.py"],
      "port": 5006,
      "transport": "sse",
      "description": "Transforms English DSL to Persian and adds semantic search",
      "tools": ["process_dsl", "create_hybrid_dsl"],
      "dependsOn": ["embedding-server"]
    },
    "search-server": {
      "command": "python",
      "args": ["src/mcp_servers/search_server.py"],
      "port": 5002,
      "transport": "sse",
      "description": "Executes Elasticsearch queries and reranks results",
      "tools": ["search_products_semantic", "execute_dsl"],
      "dependsOn": ["embedding-server"]
    }
  },
  "settings": {
    "debugMode": false,
    "logLevel": "INFO",
    "logDir": "logs"
  },
  "architecture": {
    "flow": [
      "1. interpret-server: Parse Persian query â†’ equip_prompt + token_mapping + persian_full_query",
      "2. equip-server: Generate Elasticsearch DSL from English equip_prompt",
      "3. dsl-processor-server: Convert English DSL to Persian + add semantic search",
      "4. search-server: Execute final DSL and rerank results"
    ],
    "equipUrl": "https://linux-peaceful-tested-owns.trycloudflare.com"
  }
}
